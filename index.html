<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>APOS Conecta - HSDU</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">

    <div id="login-screen" class="card center">
      <h2>APOS Conecta</h2>
      <p class="muted">Ingrese credenciales</p>
      <form id="login-form">
        <label>Usuario
          <input id="username" type="text" required />
        </label>
        <label>Contrase√±a
          <input id="password" type="password" required />
        </label>
        <div class="actions">
          <button class="btn primary" type="submit">Ingresar</button>
        </div>
        <p class="hint">Usuarios demo:<br>
        admin / admin123<br>
        auditor / auditor123<br>
        prestador / prestador123<br>
        operador / operator123</p>
      </form>
    </div>

    <div id="main-screen" class="hidden">

      <header class="topbar">

        <div class="header-left">
          <img src="logo-apos.png" id="logo-obra" alt="Logo APOS">
          <div class="brand">APOS Conecta ‚Äî HSDU</div>
        </div>

        <div style="display:flex; align-items:center; gap:14px;">
          <div id="current-user"></div>
          <div id="current-role" class="muted" style="font-size:0.85rem;"></div>

          <button id="admin-panel-btn" class="btn hidden">Administraci√≥n</button>
          <button id="logout-btn" class="btn danger">Salir</button>
        </div>
      </header>

      <main class="layout">

        <aside class="sidebar card">
          <h3>Afiliados</h3>
          <input id="patient-filter" placeholder="Buscar..." />
          <ul id="patient-list" class="list"></ul>
        </aside>

        <section class="content card">

          <div class="patient-header">
            <h2 id="patient-name">Seleccione un afiliado</h2>
            <div class="muted" id="patient-filiatory"></div>
          </div>

          <nav class="tabs" id="module-tabs">
            <button class="tab active" data-module="resumen">Resumen</button>
            <button class="tab" data-module="ambulatorio">Ambulatorio</button>
            <button class="tab" data-module="internacion">Internaci√≥n</button>
            <button class="tab" data-module="farmacia">Farmacia</button>
            <button class="tab" data-module="laboratorio">Laboratorio</button>
            <button class="tab" data-module="kine">Kinesiolog√≠a</button>
            <button class="tab" data-module="odonto">Odontolog√≠a</button>
            <button class="tab" data-module="afiliacion">Afiliaci√≥n</button>
            <button class="tab" id="tab-admin" data-module="admin" style="display:none;">Administraci√≥n</button>
          </nav>

          <div id="module-content">

            <div id="resumen" class="module active">
              <h3>√öltimos registros</h3>
              <div id="resumen-body" class="box muted">Seleccione un afiliado.</div>
            </div>

            <div id="ambulatorio" class="module">
              <h3>Consulta Ambulatoria</h3>
              <div id="ambulatorio-list"></div>
              <hr/>

              <h4>Nueva consulta</h4>
              <form id="form-ambulatorio" class="hsi-form">
                <label>Profesional <input name="profesional" required></label>
                <label>Matr√≠cula <input name="matricula" required></label>
                <label>Fecha/hora atenci√≥n <input type="datetime-local" name="fecha" required></label>
                <label>Motivo de consulta <input name="motivo" required></label>
                <label>Examen f√≠sico <textarea name="examen" required></textarea></label>

                <label>Diagn√≥stico SNOMED
                  <div class="snomed-row">
                    <input id="snomed-search-amb" required>
                    <select id="snomed-results-amb"></select>
                    <button type="button" id="add-snomed-amb">Asignar</button>
                  </div>
                </label>

                <label>Plan / Conducta <textarea name="plan" required></textarea></label>
                <label>Observaciones <textarea name="obs"></textarea></label>

                <div class="actions">
                  <button class="btn primary">Guardar consulta</button>
                </div>
              </form>
            </div>

            <div id="internacion" class="module">
              <h3>Internaci√≥n</h3>

              <div id="internacion-list"></div>
              <hr/>

              <h4>Registrar internaci√≥n</h4>

              <form id="form-internacion" class="hsi-form">
                <label>Tipo <select name="tipo" required>
                  <option>Programado</option>
                  <option>Emergencia</option>
                </select></label>

                <label>Fecha/hora ingreso <input type="datetime-local" name="ingreso" required></label>

                <label>Diagn√≥stico ingreso SNOMED
                  <div class="snomed-row">
                    <input id="snomed-search-int" required>
                    <select id="snomed-results-int"></select>
                    <button type="button" id="add-snomed-int">Asignar</button>
                  </div>
                </label>

                <label>Servicio <input name="servicio" required></label>
                <label>Cama <input name="cama" required></label>

                <div class="actions">
                  <button class="btn primary">Registrar</button>
                </div>
              </form>

              <hr/>
              <h4>Evoluciones ‚Äî Timeline</h4>
              <div id="evoluciones-timeline" class="timeline"></div>

              <form id="form-evolucion" class="hsi-form">
                <label>Evoluci√≥n <textarea name="evo" required></textarea></label>
                <label>Fecha/hora <input type="datetime-local" name="fecha" required></label>
                <div class="actions"><button class="btn">Agregar evoluci√≥n</button></div>
              </form>
            </div>

            <div id="farmacia" class="module">
              <h3>Dispensa de Medicamentos</h3>
              <div id="farmacia-list"></div>
              <hr/>

              <h4>Nueva dispensa</h4>

              <form id="form-farmacia" class="hsi-form">

                <label>Fecha <input type="date" name="fecha" required></label>

                <label>Medicamento SNOMED
                  <input name="medicamento" required placeholder="Ej: Ibuprofeno 400mg">
                </label>

                <label>Cantidad entregada <input type="number" name="cantidad" min="1" required></label>

                <label>Observaciones <textarea name="obs"></textarea></label>

                <div class="actions">
                  <button class="btn primary">Registrar entrega</button>
                </div>

              </form>
            </div>

            <div id="laboratorio" class="module">
              <h3>Laboratorio</h3>

              <div id="lab-list"></div>
              <hr/>

              <h4>Cargar estudio</h4>
              <form id="form-lab" class="hsi-form">
                <label>Fecha <input type="date" name="fecha" required></label>
                <label>Tipo de estudio <input name="estudio" required /></label>
                <label>Resultado <textarea name="resultado" required></textarea></label>
                <div class="actions">
                  <button class="btn primary">Guardar estudio</button>
                </div>
              </form>
            </div>

            <div id="kine" class="module">
              <h3>Kinesiolog√≠a</h3>

              <div id="kine-list"></div>
              <hr/>

              <h4>Registrar sesi√≥n</h4>
              <form id="form-kine" class="hsi-form">
                <label>Fecha <input type="date" name="fecha" required></label>
                <label>T√©cnica <input name="tecnica" required></label>
                <label>Observaciones <textarea name="obs"></textarea></label>
                <div class="actions"><button class="btn primary">Registrar sesi√≥n</button></div>
              </form>
            </div>

            <div id="odonto" class="module">
              <h3>Odontolog√≠a</h3>

              <div id="odonto-list"></div>
              <hr/>

              <h4>Registrar pr√°ctica odontol√≥gica</h4>
              <form id="form-odonto" class="hsi-form">
                <label>Fecha <input type="date" name="fecha" required></label>
                <label>Pieza dentaria <input name="pieza" placeholder="Ej: 1.6" required></label>
                <label>Pr√°ctica <input name="practica" required></label>
                <label>Observaciones <textarea name="obs"></textarea></label>
                <div class="actions"><button class="btn primary">Registrar pr√°ctica</button></div>
              </form>
            </div>

             <div id="afiliacion" class="module">
              <h3>Alta de Nuevo Afiliado</h3>
              <form id="form-afiliacion" class="hsi-form">
                <label>Nombre Completo
                  <input name="nombre" required>
                </label>
                <label>Documento (DNI/LC/LE)
                  <input name="documento" type="text" required>
                </label>
                <label>Fecha de Nacimiento
                  <input name="nacimiento" type="date" required>
                </label>
                <label>Sexo
                 <select name="sexo" required>
                  <option value="F">Femenino</option>
                  <option value="M">Masculino</option>
                  <option value="O">Otro</option>
                 </select>
                </label>

                <hr/>

                <h4>Datos Filiatorios (OS)</h4>

                <label>N¬∞ Obra Social / Afiliado
                  <input name="obra_social" required>
                </label>
                <label>Domicilio
                  <input name="domicilio" required>
                </label>
                <label>Tel√©fono
                  <input name="telefono" type="tel" required>
                </label>

                <div class="actions">
                  <button class="btn primary">Registrar Afiliado</button>
                </div>
              </form>
            </div>
             <div id="admin" class="module">
              <h3>Gesti√≥n de Usuarios</h3>

              <h4>Usuarios registrados</h4>
              <ul id="admin-user-list" class="list"></ul>

              <hr>

              <h4>Crear / Editar usuario</h4>

              <form id="admin-user-form" class="hsi-form">
                <label>Usuario <input name="username" required></label>

                <label>Contrase√±a <input name="password" required></label>

                <label>Rol
                 <select name="role" required>
                  <option value="admin">Administrador</option>
                  <option value="auditor">Auditor</option>
                  <option value="prestador">Prestador</option>
                 </select>
                </label>

                <input type="hidden" name="editIndex" value="-1">

                <div class="actions">
                 <button class="btn primary">Guardar usuario</button>
                 <button type="button" id="admin-cancel-edit" class="btn">Cancelar</button>
                </div>
              </form>
           </div>


          </div>

        </section>

        <aside class="news-sidebar card">
            <h3>üì¢ Novedades HSI / APOS</h3>
            <div id="news-container">
                <div class="news-item">
                    <h4>Resoluci√≥n 445/2025 - Vademecum OS</h4>
                    <p class="muted">Actualizaci√≥n de listado de medicamentos cubiertos y protocolos de autorizaci√≥n previa. Vigencia: 01/12/2025.</p>
                </div>
                <div class="news-item">
                    <h4>Nuevo M√≥dulo: Telemedicina</h4>
                    <p class="muted">Pr√≥ximo lanzamiento del m√≥dulo de registro de consultas por Telemedicina, cumpliendo normativas nacionales.</p>
                </div>
                <div class="news-item">
                    <h4>Capacitaci√≥n SNOMED CT</h4>
                    <p class="muted">Sesi√≥n obligatoria para todos los prestadores. Ver cronograma en la secci√≥n Administraci√≥n.</p>
                </div>
            </div>
            <hr>
            <div class="news-footer">
                <a href="#" class="btn secondary small">Ver Comunicados Oficiales</a>
            </div>
        </aside>
        </main>
    </div>

  </div>

  <script src="app.js"></script>
</body>
</html>